<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Cache-Control" content="no-cache" />
		<title>Register new User</title>
    </head>
    <body>
    <ui:composition template="/templates/simplePage.xhtml">
        <ui:param name="pageTitle" value="Register as a new user"/>
        <ui:define name="body">
        <h:form id="register">
	        <h:panelGrid columns="2">
	            <h:outputText value="Reference Code" rendered="#{reg.referenceRequired}"/>
	            <h:panelGroup rendered="#{reg.referenceRequired}">
	                <h:inputText id="referenceCode" value="#{reg.tp.referenceCode}" size="10" required="true"/>
	                <h:message for="referenceCode" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	            <h:outputText value="First Name"/>
	            <h:panelGroup>
	                <h:inputText id="givenName" value="#{reg.tp.givenName}" size="50" required="true"/>
	                <h:message for="givenName" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	           <h:outputText value="Last Name"/>
	            <h:panelGroup>
	                <h:inputText id="sn" value="#{reg.tp.sn}" size="50" required="true"/>
	                <h:message for="sn" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	            <h:outputText value="user id/Email Address"/>
	            <h:panelGroup>
	                <h:inputText id="uid" value="#{reg.tp.uid}" size="50" required="true"/>
	                <h:message for="uid" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	            <c:if test="#{top.properties['tolven.register.separateUID']}">
		            <h:outputText value="Email address"/>
		            <h:panelGroup>
		                <h:inputText id="email" value="#{reg.tp.primaryMail}" size="50" required="true"/>
		                <h:message for="email" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
		            </h:panelGroup>
	      		</c:if>
	            <h:outputText value="Repeat Email address"/>
	            <h:panelGroup>
	                <h:inputText id="uid2" value="#{reg.repeatUid}" size="50" required="true"/>
	                <h:message for="uid2" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	            <h:outputText value="Organization Unit Name"/>
	            <h:panelGroup>
	                <h:inputText id="organizationUnitName" value="#{reg.tp.organizationUnitName}" size="50" required="true"/>
	                <h:message for="organizationUnitName" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	            <h:outputText value="Organization Name"/>
	            <h:panelGroup>
	                <h:inputText id="organizationName" value="#{reg.tp.organizationName}" size="50" required="true"/>
	                <h:message for="organizationName" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	            <h:outputText value="State Or Province"/>
	            <h:panelGroup>
	                <h:inputText id="stateOrProvince" value="#{reg.tp.stateOrProvince}" size="50" required="true"/>
	                <h:message for="stateOrProvince" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
            	<h:outputText value="Country Name"/>
            	<ui:include src="../templates/isoCountry.xhtml"/>
	            <h:outputText value="Password"/>
	            <h:panelGroup>
	                <h:inputSecret id="userPassword" value="#{reg.tp.userPassword}" size="50" required="true"/>
	                <h:message for="userPassword" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	            <h:outputText value="Repeat Password"/>
	            <h:panelGroup>
	                <h:inputSecret id="userPassword2" value="#{reg.repeatUserPassword}" size="50" required="true"/>
	                <h:message for="userPassword2" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg"/>
	            </h:panelGroup>
	        </h:panelGrid>
	            <p>An email will be sent to you at the address above. there will be a link in the email. Click the link 
	            and login with the username (email address) and password you entered here.
	            </p>
	               In which format do you want your mail to be sent?
		       <h:selectOneRadio  value="#{reg.tp.emailFormat}" >
                          <f:selectItem itemLabel="HTML" itemValue="html" />
                          <f:selectItem itemLabel="Text" itemValue="text" />
               </h:selectOneRadio>
	            <h:panelGroup rendered="#{reg.referenceRequired}">
	            <p>A reference code is not required to login, only to create a new login id.</p>
	            </h:panelGroup>
	        <h:commandButton action="cancel" value="Cancel" immediate="true"/>
	        <h:commandButton action="#{reg.register}" value="Register"/>
        </h:form>
       </ui:define>
    </ui:composition>
    </body>
</html>