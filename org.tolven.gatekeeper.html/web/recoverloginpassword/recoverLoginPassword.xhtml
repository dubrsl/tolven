<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jstl/core">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Cache-Control" content="no-cache" />
    <title>Recover Login Password</title>
</head>

<body>
    <ui:composition>
		<h:graphicImage value="/images/tolven-login-backimage.png" rendered="true" />
		<div style="clear:both"/>
		<hr/>
		
		<h2>Recover Login Password</h2>
		
		<div style="clear:both"/>
		<hr/>
		
		<h:panelGrid>
			<h:form id="findQuestionForm">
				<fieldset><legend>Find Security Question</legend>
					<h:panelGrid columns="2">
		               	<h:outputText value="Realm"/>
		 				<h:selectOneMenu id="searchRealm" value="#{recover.searchRealm}" >
		                	<f:selectItems value="#{recover.realms}" />
		                </h:selectOneMenu>
						<h:outputText value="Email Address/User ID" />
						<h:inputText id="searchUid" value="#{recover.searchUid}" size="50" required="true" />
						<h:message for="searchUid" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg" />
						<h:commandButton action="#{recover.findSecurityQuestion}" value="Get Question" />
					</h:panelGrid>
					<h:message for="findQuestionForm" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg" />
				</fieldset>
	         </h:form>
		</h:panelGrid>
		
		<h:panelGrid>
			<h:form id="recoverForm">
				<fieldset><legend>Reset</legend>
					<h:panelGrid columns="2">
		               	<h:outputText value="Realm"/>
						<h:inputText id="realm" value="#{recover.realm}" size="50" readonly="true" />
						<h:outputText value="Email Address/User ID" />
						<h:inputText id="uid" value="#{recover.uid}" size="50" readonly="true" />
						<h:outputText value="Security Question" />
						<h:inputText id="securityQuestion" value="#{recover.activeSecurityQuestion}" size="50" readonly="true" />
						<h:outputText value="Answer" />
						<h:panelGroup>
							<h:inputSecret id="securityQuestionAnswer" value="#{recover.securityQuestionAnswer}" size="50" required="true" />
							<h:message for="securityQuestionAnswer" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg" />
						</h:panelGroup>
						<h:outputText value="New Password" />
						<h:panelGroup>
							<h:inputSecret id="newUserPassword" value="#{recover.newUserPassword}" size="50" required="true" />
							<h:message for="newUserPassword" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg" />
						</h:panelGroup>
						<h:outputText value="Repeat New Password" />
						<h:panelGroup>
							<h:inputSecret id="newUserPassword2" value="#{recover.newUserPassword2}" size="50" required="true" />
							<h:message for="newUserPassword2" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg" />
						</h:panelGroup>
						<h:commandButton action="#{recover.recoverLoginPassword}" value="Reset" />
					</h:panelGrid>
					<h:message for="recoverForm" errorClass="errorMsg" infoClass="infoMsg" warnClass="warnMsg" fatalClass="fatalMsg" />
   				</fieldset>
				<h:inputHidden id="hiddenActiveSecurityQuestion" value="#{recover.activeSecurityQuestion}" />
				<h:inputHidden id="hiddenRealm" value="#{recover.realm}" />
				<h:inputHidden id="hiddenUid" value="#{recover.uid}" />
			</h:form>
		</h:panelGrid>
		
		<div style="clear:both"/>
		<hr/>
			
		<h:form id="cancelForm">
	    	<h:commandLink id="cancel" action="cancel">
				<h:outputText value="Cancel" /><br/>
	    	</h:commandLink>
	   </h:form>
	   
    </ui:composition>
</body>
</html>
