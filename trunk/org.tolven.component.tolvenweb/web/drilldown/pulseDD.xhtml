<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:wiz="http://www.tolven.org/jsf/wizard"
      xmlns:trim="http://www.tolven.org/jsf/trim">
<head>
    <title>Patient Pulse - Drilldown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
    <ui:composition>
		<wiz:body>
			<h2><h:outputText value="#{act.title.ST.value}"/></h2>
			<h:panelGrid columns="2" >
				<h:outputText value="#{msg.DateOfObservation}: "/>
				<trim:TS id="effectiveTime" value="#{act.effectiveTime.TS}" dateStyle="short" timeStyle="short" readonly="true"/>
				<h:outputText value="#{msg.Value}: "/>
				<h:outputText value="#{trim.trim.act.observation.value.ST.value} #{act.observation.value.label.value}"/>

				<h:outputText value="#{trim.trim.act.relationships[0].act.observation.value.label.value}: "/>
				<trim:CE id="rhythm" valueSet="rhythm" value="#{trim.trim.act.relationships[0].act.observation.value}" readonly="true"/>

				<h:outputText value="#{trim.trim.act.relationships[1].act.observation.value.label.value}: "/>
				<trim:CE id="Site" valueSet="site" value="#{trim.trim.act.relationships[1].act.observation.value}" readonly="true"/>

				<h:outputText value="#{trim.trim.act.relationships[2].act.observation.value.label.value}: "/>
				<trim:CE id="laterality" valueSet="laterality" value="#{trim.trim.act.relationships[2].act.observation.value}" readonly="true"/>

				<h:outputText value="#{trim.trim.act.relationships[3].act.observation.value.label.value}: "/>
				<h:outputText id="comments" value="#{trim.trim.act.relationships[3].act.observation.value.ST.value}" readonly="true"></h:outputText>
				
			</h:panelGrid>
			<c:if test="#{vitalsignsHistory.history != null}">
    				<div style="width:100%;height:100%; padding: 5px;">
					<a href="#" onclick="$('historyDisplayTable').toggle();return false;">History</a>
						<table cellspacing="0" cellpadding="0" style="display: none;" id="historyDisplayTable" width="60%">
							<thead>
			    				<tr>
			    					<th>User</th>
			    					<th>Timestamp</th>
			    					<th>Value</th>
			    					<th>Units</th>
			    					<th>Status</th>
			    				</tr>
							</thead>
							<tbody style="width: 100%;">
				    			<c:forEach var="tmp" items="#{vitalsignsHistory.history}" varStatus="indx">
				    				<tr>
				    					<td style="width: 20%;">#{tmp['user']}</td>
				    					<td style="width: 20%;">#{tmp['timestamp']}</td>
				    					<td style="width: 20%;">#{tmp['value']}</td>
				    					<td style="width: 20%;">#{tmp['units']}</td>
				    					<td style="width: 20%;">#{tmp['status']}</td>
				    				</tr>
				    			</c:forEach>
							</tbody>
		    			</table>
					</div>
				</c:if>
		</wiz:body>
	</ui:composition>
</body>
</html>