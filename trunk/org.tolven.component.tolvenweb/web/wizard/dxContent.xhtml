<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:wiz="http://www.tolven.org/jsf/wizard"
      xmlns:trim="http://www.tolven.org/jsf/trim">
<head>
    <title>Diagnosis</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
<ui:composition>
	<wiz:step title="#{rel.act.observation.value.CE.displayName}" >
		<wiz:body>	
			<div class="delete"> 
				<a href="#" onclick="javascript:removeTemplate('#{menu.elementLabel}',#{rel.sequenceNumber})">Remove this Diagnosis</a>
        <a class="addnew" href="#" onclick="javascript:openTemplate('#{menu.menuDataItem.parent01.path}:diagnoses:menu','#{menu.menuDataItem.parent01.path}:diagnoses:menu', 'addTemplate', '#{menu.elementLabel}', 0)">Add Additional Diagnosis</a>
			</div>
			<wiz:group title="#{rel.act.observation.value.CE.displayName}">
				<table style="width:100%;">
          <tr>
            <td style="width:60%;">
							<wiz:group title="Diagnosis">
								<h:outputText value="#{rel.act.observation.value.CE.displayName}"/>
							</wiz:group>
						</td>
            <td style="width:30%;">
              <c:if test="#{not empty trim.list['echr:patient:share:accountShares~Name']}">
	              <wiz:group title="#{msg.SendTo}">
	              	<h:selectManyCheckbox value="#{rel.act.sendTos}" >
	              		<f:selectItems value="#{trim.partyList['echr:patient:share:accountShares~Name']}"/>
	                </h:selectManyCheckbox>
	              </wiz:group>
              </c:if>		              
            </td>
          </tr>
        </table>		    
				<wiz:group title="Date of diagnosis">
					<trim:TS id="effectiveTime#{rel.sequenceNumber}" value="#{rel.act.effectiveTime.TS}" dateStyle="short" />
				</wiz:group>
				<wiz:group title="Additional Details" >
					<wiz:yesno id="dxDetails#{rel.sequenceNumber}">Add?</wiz:yesno>
					<wiz:group title="Episodicity" visible="$('#{menu.elementLabel}:dxDetails#{rel.sequenceNumber}').isTrue();">
						<trim:valueSetMenu id="episodicity#{rel.sequenceNumber}" slot="#{rel.act.relationship['episodicity'].act.observation.value}"/>
					</wiz:group>
					<wiz:group title="Severity" visible="$('#{menu.elementLabel}:dxDetails#{rel.sequenceNumber}').isTrue();">
						<trim:CE id="severity#{rel.sequenceNumber}" valueSet="severity" value="#{rel.act.relationships[1].act.observation.value}" layout="pageDirection" />
					</wiz:group>
					<wiz:group title="Course" visible="$('#{menu.elementLabel}:dxDetails#{rel.sequenceNumber}').isTrue();">
						<trim:CE id="course#{rel.sequenceNumber}" valueSet="course" value="#{rel.act.relationships[2].act.observation.value}"/>
					</wiz:group>
					<wiz:group title="Onset" visible="$('#{menu.elementLabel}:dxDetails#{rel.sequenceNumber}').isTrue();">
						<trim:CE id="onset#{rel.sequenceNumber}" valueSet="onset" value="#{rel.act.relationships[3].act.observation.value}" layout="pageDirection" />
					</wiz:group>
				</wiz:group>
			</wiz:group>
		</wiz:body>
		<wiz:help>
			<h1>Diagnosis</h1>
			<p>TBD</p>
		</wiz:help>
	</wiz:step>
</ui:composition>

</body>
</html>